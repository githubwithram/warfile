pipeline {
    agent any
            tools {
  maven 'maven-3.9.0'
}
        stages{
          stage('validate'){
              steps {
                    sh 'mvn validate'
                    }
             }
                    stage('compile'){
              steps {
                   sh 'mvn compile'
                    }
             }
       
        stage('test'){
              steps {
                   sh 'mvn test'
                    }
             }
             
             stage('package'){
              steps {
                   sh 'mvn package'
                    }
             }
             stage('verify'){
              steps {
                   sh 'mvn verify'
                    }
             }
             stage('install'){
              steps {
                   sh 'mvn install'
                    }
             }
              stage('copy to tomcat'){
              steps {
              sh 'scp -oStrictHostKeyChecking=no /var/lib/jenkins/workspace/pipelinepro/target/simpleweb.war ec2-user@354.238.236.180:/home/ec2-user/tomcat/apache-tomcat-11.0.0-M4/webapps/'
              
             }
        }
        stage('deploy'){
              steps {
                   sh 'mvn deploy'
                    }
             }
       }
}
